<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Application de Cartographie - Icônes personnalisées</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <style>
        #map { height: 100vh; }
    </style>
</head>
<body>
    <div id="map"></div>

    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <script>
        // Initialisation de la carte
        const map = L.map('map').setView([48.8566, 2.3522], 13); // Position initiale sur Paris

        // Ajout de la couche de fond de carte
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; OpenStreetMap contributors'
        }).addTo(map);

        // Extension de la classe L.Icon pour définir des paramètres communs
        const MyIconClass = L.Icon.extend({
            options: {
                iconSize: [15, 15],       // Taille de l'icône
                iconAnchor: [16, 37],     // Point d'ancrage
                popupAnchor: [0, -28]     // Position de la popup
            }
        });

        // Instances de MyIconClass pour chaque type de lieu avec leurs images respectives
        const icons = {
            hopital: new MyIconClass({ iconUrl: 'hospital-solid.svg' }),
            banque: new MyIconClass({ iconUrl: 'building-columns-solid.svg' }),
            restaurant: new MyIconClass({ iconUrl: 'utensils-solid.svg' })
        };

        // Liste de lieux avec leurs types et coordonnées
        const lieux = [
            { nom: "Hôpital Saint-Louis", type: "hopital", coord: [48.8738, 2.3706] },
            { nom: "Banque de France", type: "banque", coord: [48.8616, 2.3364] },
            { nom: "Restaurant Le Gourmet", type: "restaurant", coord: [48.8566, 2.3522] }
        ];

        // Fonction pour afficher les marqueurs avec les icônes appropriées
        lieux.forEach(lieu => {
            const icon = icons[lieu.type]; // Sélection de l'icône en fonction du type

            if (icon) {
                L.marker(lieu.coord, { icon: icon })
                    .addTo(map)
                    .bindPopup(`<b>${lieu.nom}</b><br>Type : ${lieu.type}`);
            } else {
                console.error(`Icône non définie pour : ${lieu.type}`);
            }
        });
    </script>
</body>
</html>
